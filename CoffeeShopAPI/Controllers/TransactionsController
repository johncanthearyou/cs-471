using Microsoft.AspNetCore.Mvc;
using Microsoft.Data.Sqlite;

namespace CoffeeShopAPI.Controllers;

[ApiController]
[Route("[controller]")]

public class TransactionsController : ControllerBase
{
    private readonly ILogger<TransactionsController> _logger;

    public TransactionsController(ILogger<TransactionsController> logger)
    {
        _logger = logger;
    }

    [HttpGet]
    public static List<List<string>> Get()
    {
        SqliteConnection sqlConnection = Database.CreateConnection();
        List<List<string>> transactions = Database.ViewTransactions();

        return transactions;
    }

    // [HttpGet]
    // public static String Get(int id)
    // {
    //     SqliteConnection sqlConnection = Database.CreateConnection();
    //     String transaction = Database.ViewSpecificTransaction(id);

    //     return transaction;
    // }

    [HttpPost]
    public static void Post(JsonContent drinks, JsonContent food, String payment, DateTime date, String customerName)
    {
        SqliteConnection sqlConnection = Database.CreateConnection();
        Database.NewTransaction(drinks, food, payment, date, customerName);

        return;
    }
}